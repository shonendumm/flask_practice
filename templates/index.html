<!DOCTYPE html>
<html>
  <head>
    <title>JSON Processing App</title>
  </head>
  <body>
    <h1>JSON Processing App</h1>

    <button id="send_button">Send JSON</button>
    <br />
    <div id="result"></div>

    <script>
      // JavaScript code to send dummy JSON data to the server when the button is clicked

      const sendData = async () => {

        try {
            let data = JSON.stringify({
          name: "John Doe",
          age: 30,
          city: "New York",
        });

        const response = await fetch("/api", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            // 'Content-Type': 'application/x-www-form-urlencoded',
          },
          body: data, // body data type must match "Content-Type" header
        });

        if (!response.ok) {
          throw new Error(`HTTP error! Status: ${response.status}`);
        }
        // parses JSON response into JavaScript object
        const result = await response.json();
        return result;

        } catch (error) {
            console.log(error);
            throw error;
        }

      };

      document
        .getElementById("send_button")
        .addEventListener("click", async() => {
            const result = await sendData();
            console.log(result);
            document.getElementById("result").innerHTML = JSON.stringify(result);
            });
    </script>
  </body>
</html>
